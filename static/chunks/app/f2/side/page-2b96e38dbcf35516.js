(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{1512:function(e,t,r){Promise.resolve().then(r.bind(r,5862))},5862:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var o=r(7437),a=r(4519),n=r(6691),d=r.n(n),s=r(4033),u=r(2265);function c(){let e=(0,s.useRouter)(),{handleAddProduct:t,order:r,handleUpdateProduct:n,handleResetOrder:c,handleSetOrderStage:i,handleSetPayStage:l}=(0,a.Z)(),p=t=>{t.preventDefault();let o=t.currentTarget.getAttribute("data-text"),{products:a,currentOrderNumber:d,targetOrderNumber:s}=r;a[s],n(s,{side:o}),e.push("/f2/beverage")};return(0,u.useEffect)(()=>{console.log(r)},[r]),(0,o.jsxs)("div",{className:" w-full items-start",children:[(0,o.jsx)("div",{className:" flex justify-start",children:(0,o.jsx)("div",{className:" h-[300px] text-h1 font-bold pt-20 ml-10",children:"사이드 변경"})}),(0,o.jsx)("div",{className:" grid grid-cols-2 text-[64px] my-40 text-center mx-20 font-semibold grid-flow-row auto-rows-[minmax(650px,_auto)] justify-items-center ",children:[{src:"/side/coleslaw.png",text:"코울슬로",id:"coleslaw"},{src:"/side/potato.png",text:"후렌치후라이",id:"potato"},{src:"/side/cheese.png",text:"치즈스틱",id:"cheese"}].map((e,t)=>(0,o.jsxs)("div",{className:"border rounded-3xl border-gray-default m-4 flex-col flex justify-center",children:[(0,o.jsx)(d(),{"data-text":e.text,onClick:e=>p(e),src:e.src,width:699,height:600,alt:e.text}),e.text]},e.text))}),(0,o.jsx)("div",{className:" flex justify-center items-center ",children:(0,o.jsx)("div",{onClick:()=>{e.push("/f2")},className:"w-full rounded-[50px] drop-shadow-[-5px_20px_4px_rgba(0,0,0,0.15)] bg-gray-Light_2  p-4 mx-20 shadow-lg text-[140px] text-center",children:"뒤로 가기"})})]})}},4519:function(e,t,r){"use strict";var o=r(2993),a=r(8392),n=r(8035);t.Z=()=>{let e=(0,o.T)(),t=(0,o.C)(e=>e.order),r=async t=>{if(t instanceof Blob){let r=e((e,t)=>t()).order;try{let o=await e((0,n.M)(t));o.payload.burger?e((0,a.d1)(1)):2===r.orderStage?e((0,a.d1)(5)):e((0,a.d1)(2))}catch(e){console.error("Error processing voice:",e);return}}else{let r=e((e,t)=>t()).order;if(r.products.some(e=>e.orderNumber===t.orderNumber))return;e((0,a.gK)(t)),e((0,a.d1)(1))}};return{order:t,handleAddProduct:r,handleUpdateProduct:(t,r)=>{console.log(t,r),e((0,a.nM)({orderNumber:t,changes:r}))},handleRemoveProduct:t=>e((0,a.kh)(t)),handleResetOrder:()=>e((0,a.H8)()),handleSetTakeout:t=>e((0,a.O_)(t)),handleSetCurrentOrderNumber:t=>e((0,a.g0)(t)),handleSetOrderStage:t=>e((0,a.d1)(t)),handleSetPayStage:t=>e((0,a.q8)(t)),handleSetTargetOrderNumber:t=>e((0,a.V8)(t))}}},2993:function(e,t,r){"use strict";r.d(t,{C:function(){return n},T:function(){return a}});var o=r(3198);let a=()=>(0,o.I0)(),n=o.v9},8392:function(e,t,r){"use strict";r.d(t,{H8:function(){return c},O_:function(){return l},V8:function(){return h},d1:function(){return f},g0:function(){return p},gK:function(){return s},kh:function(){return u},nM:function(){return i},q8:function(){return g}});var o=r(64),a=r(8035);let n={products:[],isTakeout:!1,ok:!1,orderStage:0,payStage:0,currentOrderNumber:0,targetOrderNumber:0,menuPrices:{burger:{bigMac:[5900,8300],BTD:[5800,8200],bulgogi:[4500,5900]},options:{pickle:300,tomato:300,cabbage:300,onion:300,patty:1e3,cheese:500}}},d=(0,o.oM)({name:"order",initialState:n,reducers:{addProduct:(e,t)=>{e.products.push(t.payload)},removeProduct:(e,t)=>{e.products=e.products.filter(e=>e.orderNumber!==t.payload)},updateProduct:(e,t)=>{let{orderNumber:r,changes:o}=t.payload;console.log(r,o);let a=e.products.find(e=>e.orderNumber==r);a&&Object.assign(a,o),console.log(a)},resetOrder:()=>({...n}),setTakeout:(e,t)=>{e.isTakeout=t.payload},setOrderStage:(e,t)=>{e.orderStage=t.payload},setPayStage:(e,t)=>{e.payStage=t.payload},setCurrentOrderNumber:(e,t)=>{e.currentOrderNumber=t.payload},setTargetOrderNumber:(e,t)=>{e.targetOrderNumber=t.payload}},extraReducers:e=>{e.addCase(a.M.fulfilled,(e,t)=>{console.log(t.payload),t.payload.burger&&e.products.push({...t.payload,quantity:+t.payload.quantity||1,orderNumber:e.products.length,ingredients:{피클:0,토마토:0,양상추:0,양파:0,패티:0,치즈:0}})}),e.addCase(a.M.rejected,(e,t)=>{})}}),{addProduct:s,removeProduct:u,resetOrder:c,updateProduct:i,setTakeout:l,setCurrentOrderNumber:p,setOrderStage:f,setPayStage:g,setTargetOrderNumber:h}=d.actions;t.ZP=d.reducer},8035:function(e,t,r){"use strict";r.d(t,{M:function(){return a}});var o=r(64);let a=(0,o.hg)("order/processVoiceForOrder",async e=>{let t=new FormData;t.append("audio_file",e,"audio.webm");let r=await fetch("https://sr-kiosk-api-shs2783.koyeb.app/api/stt/menu",{method:"POST",headers:{accept:"application/json"},body:t}),o=await r.json();if(!r.ok)throw Error("Server responded with a non-200 status");return o.menu})}},function(e){e.O(0,[713,758,971,596,744],function(){return e(e.s=1512)}),_N_E=e.O()}]);