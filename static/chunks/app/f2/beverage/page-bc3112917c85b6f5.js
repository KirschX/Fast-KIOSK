(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[504],{1701:function(e,r,t){Promise.resolve().then(t.bind(t,3312))},3312:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u}});var a=t(7437),o=t(4519),n=t(6691),d=t.n(n),s=t(4033);function u(){let e=(0,s.useRouter)(),{handleAddProduct:r,order:t,handleUpdateProduct:n,handleResetOrder:u,handleSetOrderStage:c,handleSetPayStage:i}=(0,o.Z)(),l=r=>{r.preventDefault();let a=r.currentTarget.getAttribute("data-text"),{products:o,currentOrderNumber:d,targetOrderNumber:s}=t,u=o[s];n(s,{...u,beverage:a}),e.push("/f2")};return(0,a.jsxs)("div",{className:" w-full items-start",children:[(0,a.jsx)("div",{className:" flex justify-start",children:(0,a.jsx)("div",{className:" h-[300px] text-h1 font-bold pt-20 ml-10",children:"음료 변경"})}),(0,a.jsx)("div",{className:" grid grid-cols-2 text-[64px] my-40 text-center mx-20 font-semibold grid-flow-row auto-rows-[minmax(650px,_auto)] justify-items-center ",children:[{src:"/beverage/coke.png",text:"코카콜라",id:""},{src:"/beverage/sprite.png",text:"사이다(스프라이트)",id:""},{src:"/beverage/coke.png",text:"제로-코카콜라",id:""},{src:"/beverage/iceCoffee.png",text:"아이스 아메리카노",id:""},{src:"/beverage/hotCoffee.png",text:"뜨거운 아메리카노",id:""}].map((e,r)=>(0,a.jsxs)("div",{className:"border rounded-3xl border-gray-default m-4 flex-col flex justify-center",children:[(0,a.jsx)(d(),{"data-text":e.text,onClick:e=>l(e),src:e.src,width:699,height:600,alt:e.text}),e.text]},e.text))}),(0,a.jsx)("div",{className:" flex justify-center items-center ",children:(0,a.jsx)("div",{onClick:()=>{e.push("/f2")},className:"w-full rounded-[50px] drop-shadow-[-5px_20px_4px_rgba(0,0,0,0.15)] bg-gray-Light_2  p-4 mx-20 shadow-lg text-[140px] text-center",children:"뒤로 가기"})})]})}},4519:function(e,r,t){"use strict";var a=t(2993),o=t(8392),n=t(8035);r.Z=()=>{let e=(0,a.T)(),r=(0,a.C)(e=>e.order),t=async r=>{if(r instanceof Blob){let t=e((e,r)=>r()).order;try{let a=await e((0,n.M)(r));a.payload.burger?e((0,o.d1)(1)):2===t.orderStage?e((0,o.d1)(5)):e((0,o.d1)(2))}catch(e){console.error("Error processing voice:",e);return}}else{let t=e((e,r)=>r()).order;if(t.products.some(e=>e.orderNumber===r.orderNumber))return;e((0,o.gK)(r)),e((0,o.d1)(1))}};return{order:r,handleAddProduct:t,handleUpdateProduct:(r,t)=>{console.log(r,t),e((0,o.nM)({orderNumber:r,changes:t}))},handleRemoveProduct:r=>e((0,o.kh)(r)),handleResetOrder:()=>e((0,o.H8)()),handleSetTakeout:r=>e((0,o.O_)(r)),handleSetCurrentOrderNumber:r=>e((0,o.g0)(r)),handleSetOrderStage:r=>e((0,o.d1)(r)),handleSetPayStage:r=>e((0,o.q8)(r)),handleSetTargetOrderNumber:r=>e((0,o.V8)(r))}}},2993:function(e,r,t){"use strict";t.d(r,{C:function(){return n},T:function(){return o}});var a=t(3198);let o=()=>(0,a.I0)(),n=a.v9},8392:function(e,r,t){"use strict";t.d(r,{H8:function(){return c},O_:function(){return l},V8:function(){return h},d1:function(){return f},g0:function(){return p},gK:function(){return s},kh:function(){return u},nM:function(){return i},q8:function(){return g}});var a=t(64),o=t(8035);let n={products:[],isTakeout:!1,ok:!1,orderStage:0,payStage:0,currentOrderNumber:0,targetOrderNumber:0,menuPrices:{burger:{bigMac:[5900,8300],BTD:[5800,8200],bulgogi:[4500,5900]},options:{pickle:300,tomato:300,cabbage:300,onion:300,patty:1e3,cheese:500}}},d=(0,a.oM)({name:"order",initialState:n,reducers:{addProduct:(e,r)=>{e.products.push(r.payload)},removeProduct:(e,r)=>{e.products=e.products.filter(e=>e.orderNumber!==r.payload)},updateProduct:(e,r)=>{let{orderNumber:t,changes:a}=r.payload;console.log(t,a);let o=e.products.find(e=>e.orderNumber==t);o&&Object.assign(o,a),console.log(o)},resetOrder:()=>({...n}),setTakeout:(e,r)=>{e.isTakeout=r.payload},setOrderStage:(e,r)=>{e.orderStage=r.payload},setPayStage:(e,r)=>{e.payStage=r.payload},setCurrentOrderNumber:(e,r)=>{e.currentOrderNumber=r.payload},setTargetOrderNumber:(e,r)=>{e.targetOrderNumber=r.payload}},extraReducers:e=>{e.addCase(o.M.fulfilled,(e,r)=>{console.log(r.payload),r.payload.burger&&e.products.push({...r.payload,quantity:+r.payload.quantity||1,orderNumber:e.products.length,ingredients:{피클:0,토마토:0,양상추:0,양파:0,패티:0,치즈:0}})}),e.addCase(o.M.rejected,(e,r)=>{})}}),{addProduct:s,removeProduct:u,resetOrder:c,updateProduct:i,setTakeout:l,setCurrentOrderNumber:p,setOrderStage:f,setPayStage:g,setTargetOrderNumber:h}=d.actions;r.ZP=d.reducer},8035:function(e,r,t){"use strict";t.d(r,{M:function(){return o}});var a=t(64);let o=(0,a.hg)("order/processVoiceForOrder",async e=>{let r=new FormData;r.append("audio_file",e,"audio.webm");let t=await fetch("https://sr-kiosk-api-shs2783.koyeb.app/api/stt/menu",{method:"POST",headers:{accept:"application/json"},body:r}),a=await t.json();if(!t.ok)throw Error("Server responded with a non-200 status");return a.menu})}},function(e){e.O(0,[713,758,971,596,744],function(){return e(e.s=1701)}),_N_E=e.O()}]);